{"version":3,"sources":["uni-app:///main.js","webpack:////Users/cuibing/Documents/HBuilderProjects/JFZP_v1/pages/message/chat.vue?9377","webpack:////Users/cuibing/Documents/HBuilderProjects/JFZP_v1/pages/message/chat.vue?ad95","webpack:////Users/cuibing/Documents/HBuilderProjects/JFZP_v1/pages/message/chat.vue?eff2","webpack:////Users/cuibing/Documents/HBuilderProjects/JFZP_v1/pages/message/chat.vue?1147","uni-app:///pages/message/chat.vue","webpack:////Users/cuibing/Documents/HBuilderProjects/JFZP_v1/pages/message/chat.vue?4a6a","webpack:////Users/cuibing/Documents/HBuilderProjects/JFZP_v1/pages/message/chat.vue?734e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","plusShow","keyShow","recordShow","textShow","focus","send_show","exit_show","voice","voice_play","messages","newMessage","userInfo","id","msgType","name","img","currentUser","token","recording","recordingDuration","recorderManager","startY","movingY","pop","tmpRecords","startTime","voiceTime","isLong","sessionId","sessionType","jobId","mounted","duration","res","tempFilePath","console","onLoad","onUnload","methods","iconChange","inputChange","sendTextMsg","sendCloseMsg","sendId","type","content","uni","success","self","fail","sendMessage","receiveId","times","message","receiveMessage","big","arr","urls","readMessage","setSession","setTitle","title","chooseImg","count","sizeType","sourceType","sendImage","url","filePath","formData","header","icon","cacheMsg","connectSocket","setTimeout","resolve","sendOneMessage","stopHeartBeat","clearInterval","heartMsg","registerMessage","closeSocket","getUserInfo","method","scrollToBottom","scrollTop","startRecord","format","sendVoice","stopRecord","cancelRecord","touchMove","voicePlay","innerAudioContext"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACmFt1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;MACA;IACA;IACA;;IAGA;IACA;;IAEA;IACA;MACA,IACAC,WAEAC,IAFAD;QACAE,eACAD,IADAC;MAEA;MACA;MACA;MACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EAEA;EACAC;IACAD;IACA;IACA;IACA;IACAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EAEAE;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;MACA;MACA;MACA;MACAC;QACA/C;QAAA;QACAgD;UACAZ;UACAa;QACA;QACAC;UACAd;QACA;MACA;IACA;IACAe;MACA;MACA;QACA;UACAP;UACAQ;UACAN;UACAD;UACA/B;UACAe;UACAwB;UACAvB;UACAC;QACA;QAEAK;QACAA;;QAEA;QACAW;UACA/C;UAAA;UACAgD;YACAZ;UACA;UACAc;YACAd;UACA;QACA;;QAEA;QACA;QACAA;QACA;QACAW;QACAX;QAEA;QAEA;;QAEA;QACA;UACA;UACA;YACAkB;UACA;QACA;MAEA;IACA;IAEAC;MACA;MACA;MACAR;QAEA;QACAX;QACA;UACA;YACAa;UACA;UACAb;QAEA;UACAa;UACAA;UACAb;QACA;UACAa;QACA;MAEA;IACA;IAEAO;MACApB;MACA;MACAqB;MACAV;QACAW;MACA;IACA;IACA;IACAC;MACA;QACA9C;QACAiC;QACAjB;QACAgB;MACA;MAEAT;;MAEA;MACAW;QACA/C;QAAA;QACAgD;UACAZ;QACA;QACAc;UACAd;QACA;MACA;IACA;IACAwB;MACAxB;MAEA;IACA;IACAyB;MACA;QACAd;UACAe;QACA;MACA;IACA;IAEAC;MACA;MACA;MACAhB;QACAiB;QAAA;QACAC;QAAA;QACAC;QAAA;QACAlB;UACAZ;UACAa;QACA;MACA;IACA;IACAkB;MAAA;MACA/B;MACA;MACAqB;QACAV;UACAqB;UACAC;UACAtD;UAAA;UACAuD;UACAC;YACA;UACA;UACAvB;YACAZ;YACA;cACA;cACAA;cACAa;YACA;cACAF;gBACAe;gBACAU;cACA;YACA;UAEA;UACAtB;YACAd;YACA;UACA;QACA;MACA;IACA;IACAqC;MACAhB;MACA;MACA;MACA;MACA;;MAEA;MACA;;MAGA;MACAV;MACA;IACA;IAEA2B;MAAA;MACA;QACA;QACA;QACA3B;UACAqB;UAAA;UACAG;YACA;UACA;UACAvB;YACAZ;YACAa;YACA;YACA;YACA;YACA0B;cACAvC;cACAwC;YACA;UACA;UACA1B;YACAd;UACA;QACA;MACA;IACA;IAEAyC;MAAA;MACA;QACA;MACA;IACA;IAEAC;MACAC;IACA;IAEAC;MAAA;MACA;MACA;QACA;UACApC;UACAE;UACAjB;UACAgB;QACA;;QAEA;QACAE;UACA/C;UAAA;UACAgD;YACAZ;UACA;UACAc;YACAd;YACAa;UACA;QACA;MACA;IACA;IACAgC;MAEA;QACArC;QACAQ;QACAP;QACAf;QACAC;MACA;MAEAK;;MAEA;MACAW;QACA/C;QAAA;QACAgD;UACAZ;UACA;QACA;QACAc;UAEAd;UACAA;UACA;QACA;MACA;IAEA;IAEA8C;MACAnC;QACAC;UACAZ;UACA;QACA;QACAc;UACAd;QACA;MACA;IACA;IACA+C;MAAA;MAEA;MACApC;QACAqB;QACAgB;QACAb;UACA;QACA;QACAvB;UACA;YACA;UACA;QAEA;MACA;IACA;IACAqC;MACAV;QACA5B;UACAuC;UACArD;QACA;MACA;IACA;IACAsD;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACAnD;MACA;MACA;;MAEA;MACA;QACAoD;MACA;IACA;IACAC;MACA;QACArD;QACA;QACAA;MACA;QACA;QACAA;QACAqB;QACA;MACA;MAEA;IACA;IACAiC;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACAtD;IAEA;IACAuD;MACA;MACA;MACAvD;MACA;MACA;IACA;IACAwD;MACA;;MAEA;MACA;MAEAxD;;MAEA;MACA;QACA;;QAEA;QACA;MACA;QACA;;QAEA;QACA;MACA;IACA;IACA;IACAyD;MAAA;MACAzD;MACA;MACA;MACA;MACA;MACA0D;MACAA;MACA;MACAA;QACA1D;MACA;MACA0D;QACA;QACA1D;QACAA;MAEA;;MAEA;MACA0D;QACA;QACA;QACA;MACA;MACA;MACAA;QACA1D;QACAA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AChnBA;AAAA;AAAA;AAAA;AAA+qC,CAAgB,+lCAAG,EAAC,C;;;;;;;;;;;ACAnsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/message/chat.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/message/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=042db559&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/message/chat.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=042db559&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"","<template>\r\n\r\n\t<view>\r\n\t\t<view class=\"container1\">\r\n\t\t\t<scroll-view class=\"chat-container\" v-for=\"(message, index) in messages\" :key=\"index\">\r\n\t\t\t\t<!-- 对话框A -->\r\n\t\t\t\t<view class=\"message-a\" v-if=\"message.sendId === userInfo.id \">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<image class=\"a-img\" :src=\"userInfo.img\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"message.msgType===1\" class=\"a-text\">{{ message.content }}</view>\r\n\t\t\t\t\t<image class=\"chatImg-L\" v-if=\"message.msgType===2\" :src=\"message.content\"\r\n\t\t\t\t\t\t@click=\"big(message.content)\"></image>\r\n\t\t\t\t\t<view class=\"voice-view1\" v-if=\"message.msgType===3\" @tap=\"voicePlay(message.content,index)\">\r\n\t\t\t\t\t\t<image class=\"voice1\" v-if=\"messages[index].voice\" src=\"../../static/icon_cb/voice.png\"></image>\r\n\t\t\t\t\t\t<image class=\"voice1\" v-if=\"messages[index].voice_play\" src=\"../../static/icon_cb/voice1.gif\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t<text class=\"voice-time\">{{message.times}}''</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 对话框B -->\r\n\t\t\t\t<view class=\"message-b\" v-if=\"message.sendId === id\">\r\n\t\t\t\t\t<view v-if=\"message.msgType===1\" class=\"b-text\">{{ message.content }}</view>\r\n\t\t\t\t\t<image class=\"chatImg-R\" v-if=\"message.msgType===2\" :src=\"message.content\"\r\n\t\t\t\t\t\t@click=\"big(message.content)\"></image>\r\n\t\t\t\t\t<view class=\"voice-view\" v-if=\"message.msgType===3\" @tap=\"voicePlay(message.content,index)\">\r\n\t\t\t\t\t\t<text class=\"voice-time\">{{message.times}}''</text>\r\n\t\t\t\t\t\t<image class=\"voice\" v-if=\"messages[index].voice\" src=\"../../static/icon_cb/voice.png\"></image>\r\n\t\t\t\t\t\t<image class=\"voice\" v-if=\"messages[index].voice_play\" src=\"../../static/icon_cb/voice1.gif\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<image class=\"b-img\" :src=\"currentUser.headPic\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<view class=\"box\">\r\n\t\t\t<view class=\"container\">\r\n\t\t\t\t<image class=\"keyA-icon\" @tap=\"inputChange()\" src=\"/static/icon_cb/luyin.png\"></image>\r\n\t\t\t\t<view class=\"records\" v-if=\"recordShow\" @touchstart=\"startRecord\" @touchend=\"stopRecord\"\r\n\t\t\t\t\t@touchcancel=\"cancelRecord\" @touchmove=\"touchMove\">{{ recording ? '松开 结束' : '按住 说话' }}</view>\r\n\t\t\t\t<input class=\"inp_comm\" v-if=\"textShow\" type=\"text\" :focus=\"focus\" v-model=\"newMessage\"\r\n\t\t\t\t\t@blur=\"sendTextMsg()\" placeholder=\"请文明用语:\" />\r\n\t\t\t\t<image class=\"keyB-icon \" v-if=\"plusShow\" @tap=\"iconChange()\" src=\"/static/icon_cb/plus.png\"></image>\r\n\t\t\t\t<image class=\"keyB-icon\" v-if=\"keyShow\" @tap=\"iconChange()\" src=\"/static/icon_cb/keyB.png\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"plus-info\" v-if=\"keyShow\">\r\n\t\t\t\t<view class=\"button-item\" @tap=\"chooseImg()\">\r\n\t\t\t\t\t<image src=\"../../static/icon_cb/xiangce.png\" class=\"icon\"></image>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<text class=\"text\">图片</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"button-item\" @tap=\"job()\">\r\n\t\t\t\t\t<image src=\"../../static/icon_cb/xiangji.png\" class=\"icon\"></image>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<text class=\"text\">拍摄</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"button-item\" @tap=\"job()\">\r\n\t\t\t\t\t<image src=\"../../static/icon_cb/xiangji.png\" class=\"icon\"></image>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<text class=\"text\">发送简历</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<view class=\"pop\" v-if=\"pop\">\r\n\t\t\t<image v-if=\"exit_show\" class=\"quxiao\" src=\"../../static/icon_cb/quxiao.png\"></image>\r\n\t\t\t<image v-if=\"send_show\" class=\"quxiao\" src=\"../../static/icon_cb/luyin.gif\"></image>\r\n\t\t\t<view v-if=\"exit_show\">松开 取消发送</view>\r\n\t\t\t<view class=\"start-text\" v-if=\"send_show\">松开发送，上划取消</view>\r\n\t\t</view>\r\n\t</view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n\timport config from '../../uni_modules/uview-ui/libs/config/config';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tplusShow: true,\r\n\t\t\t\tkeyShow: false,\r\n\t\t\t\trecordShow: false,\r\n\t\t\t\ttextShow: true,\r\n\t\t\t\tfocus: false,\r\n\t\t\t\tsend_show: true,\r\n\t\t\t\texit_show: false,\r\n\t\t\t\tvoice: true,\r\n\t\t\t\tvoice_play: false,\r\n\t\t\t\tmessages: [], // 保存聊天消息的数组\r\n\t\t\t\tnewMessage: '', // 用户输入的新消息\r\n\t\t\t\tuserInfo: '',\r\n\t\t\t\tid: '',\r\n\t\t\t\tmsgType: 1,\r\n\t\t\t\tname: '',\r\n\t\t\t\timg: '',\r\n\t\t\t\tcurrentUser: {},\r\n\t\t\t\ttoken: '',\r\n\t\t\t\trecording: false,\r\n\t\t\t\t// showDurationPopup: false,\r\n\t\t\t\t// showCancelPopup: false,\r\n\t\t\t\trecordingDuration: 0,\r\n\t\t\t\trecorderManager: null,\r\n\t\t\t\tstartY: 0,\r\n\t\t\t\tmovingY: 0,\r\n\t\t\t\tpop: false,\r\n\t\t\t\ttmpRecords: \"\",\r\n\t\t\t\tstartTime: 0,\r\n\t\t\t\tvoiceTime: '',\r\n\t\t\t\tisLong: false, // 是否长大于宽，\r\n\t\t\t\tsessionId: '',\r\n\t\t\t\tsessionType: 1,\n\t\t\t\tjobId:''\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 消息页面加载时从本地存储获取消息记录\r\n\t\t\tconst storedMessages = uni.getStorageSync('chatMessages_' + this.userInfo.id);\r\n\t\t\tif (storedMessages) {\r\n\t\t\t\tthis.messages = storedMessages;\r\n\t\t\t}\r\n\t\t\tthis.scrollToBottom();\r\n\r\n\r\n\t\t\t// 音频获取 RecorderManager 对象\r\n\t\t\tthis.recorderManager = uni.getRecorderManager();\r\n\r\n\t\t\t// 监听录音结束事件\r\n\t\t\tthis.recorderManager.onStop((res) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tduration,\r\n\t\t\t\t\ttempFilePath\r\n\t\t\t\t} = res;\r\n\t\t\t\tthis.recordingDuration = Math.floor(duration);\r\n\t\t\t\t// this.showDurationPopup = true;\r\n\t\t\t\tthis.tmpRecords = tempFilePath\r\n\t\t\t\tconsole.log(\"录音\", tempFilePath)\r\n\t\t\t\t// 在这里可以将 tempFilePath 上传到服务器\r\n\t\t\t\t// console.log(\"移动\",this.movingY)\r\n\t\t\t\t// if (this.movingY < -50) {\r\n\t\t\t\t// \tthis.cancelRecord()\r\n\t\t\t\t// \tconsole.log(\"取消了~\")\r\n\t\t\t\t// } else {\r\n\t\t\t\t// \tconsole.log(\"取消了111~\")\r\n\t\t\t\t// \tlet arr = new Array()\r\n\t\t\t\t// \tarr.push(this.tmpRecords)\r\n\t\t\t\t// \tthis.sendImage(arr)\r\n\t\t\t\t// }\r\n\t\t\t\tthis.sendVoice()\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconsole.log(\"options\", options)\r\n\t\t\tthis.userInfo = options\r\n\t\t\tthis.sessionType = options.type\r\n\t\t\tthis.jobId = options.jobId\r\n\t\t\tconsole.log(\"jobId\", options.jobId)\r\n\t\t\tthis.setTitle(this.userInfo.name)\r\n\t\t\t// this.connectSocket()\r\n\t\t\tthis.sendOneMessage()\r\n\t\t\tthis.id = uni.getStorageSync(\"userId\")\r\n\t\t\tthis.receiveMessage()\r\n\t\t\tthis.getUserInfo()\r\n\t\t\tthis.token = uni.getStorageSync(\"token\")\r\n\t\t},\r\n\r\n\t\tonUnload() {\r\n\t\t\tthis.sendCloseMsg()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ticonChange() {\r\n\t\t\t\tthis.plusShow = (this.plusShow) ? false : true\r\n\t\t\t\tthis.keyShow = (this.keyShow) ? false : true\r\n\t\t\t},\r\n\r\n\t\t\tinputChange() {\r\n\t\t\t\tthis.recordShow = (this.recordShow) ? false : true\r\n\t\t\t\tthis.textShow = (this.textShow) ? false : true\r\n\t\t\t\tthis.keyShow = false\r\n\t\t\t\tthis.plusShow = true\r\n\t\t\t},\r\n\r\n\t\t\tsendTextMsg() {\r\n\t\t\t\tthis.msgType = 1\r\n\t\t\t\tthis.sendMessage()\r\n\t\t\t},\r\n\t\t\tsendCloseMsg() {\r\n\t\t\t\tconst newMsg = {\r\n\t\t\t\t\tsendId: this.id,\r\n\t\t\t\t\ttype: 2,\r\n\t\t\t\t\tcontent: \"关闭消息\"\r\n\t\t\t\t};\r\n\t\t\t\tlet self = this\r\n\t\t\t\t// 发送消息\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(newMsg), // 要发送的消息内容\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log('关闭消息发送成功', res);\r\n\t\t\t\t\t\tself.stopHeartBeat()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.error('关闭消息发送失败', err);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendMessage() {\r\n\t\t\t\t// this.focus = true\r\n\t\t\t\tif (this.newMessage.trim() !== '') {\r\n\t\t\t\t\tconst newMsg = {\r\n\t\t\t\t\t\tsendId: this.id,\r\n\t\t\t\t\t\treceiveId: this.userInfo.id,\r\n\t\t\t\t\t\tcontent: this.newMessage.trim(),\r\n\t\t\t\t\t\ttype: 3,\r\n\t\t\t\t\t\tmsgType: this.msgType,\r\n\t\t\t\t\t\tsessionId: this.userInfo.sessionId,\r\n\t\t\t\t\t\ttimes: this.voiceTime,\r\n\t\t\t\t\t\tsessionType: this.sessionType,\r\n\t\t\t\t\t\tjobId: this.jobId\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconsole.log(\"消息\", newMsg)\r\n\t\t\t\t\tconsole.log(\"消息session\", this.userInfo.sessionId)\r\n\r\n\t\t\t\t\t// 发送消息\r\n\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\tdata: JSON.stringify(newMsg), // 要发送的消息内容\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tconsole.log('消息发送成功', res);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.error('消息发送失败', err);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// 将新消息添加到数组中\r\n\t\t\t\t\tthis.messages.push(newMsg);\r\n\t\t\t\t\tconsole.log(\"存储前\", newMsg)\r\n\t\t\t\t\t// 将更新后的消息记录存储到本地\r\n\t\t\t\t\tuni.setStorageSync('chatMessages_' + this.userInfo.id, this.messages);\r\n\t\t\t\t\tconsole.log(\"已缓存\", this.messages)\r\n\r\n\t\t\t\t\tthis.scrollToBottom();\r\n\r\n\t\t\t\t\tthis.newMessage = ''; // 清空输入框\r\n\r\n\t\t\t\t\tconst storedMessages = uni.getStorageSync('chatMessages_' + this.userInfo.id);\r\n\t\t\t\t\tif (storedMessages) {\r\n\t\t\t\t\t\tthis.messages = storedMessages;\r\n\t\t\t\t\t\tthis.messages.forEach(message => {\r\n\t\t\t\t\t\t\tmessage.voice = true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\treceiveMessage() {\r\n\t\t\t\t// 监听 WebSocket 接收消息事件\r\n\t\t\t\tconst self = this;\r\n\t\t\t\tuni.onSocketMessage(function(res) {\r\n\r\n\t\t\t\t\tlet arr = JSON.parse(res.data)\r\n\t\t\t\t\tconsole.log('收到服务器消息：', arr);\r\n\t\t\t\t\tif (arr.isSystem === 1 && arr.type === 1) {\r\n\t\t\t\t\t\tif (arr.sessionId) {\r\n\t\t\t\t\t\t\tself.setSession(arr.sessionId)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(\"sessionID\", arr.sessionId)\r\n\r\n\t\t\t\t\t} else if (arr.isSystem === 0 && arr.type !== 5) {\r\n\t\t\t\t\t\tself.cacheMsg(arr)\r\n\t\t\t\t\t\tself.readMessage(arr.id)\r\n\t\t\t\t\t\tconsole.log('缓存了');\r\n\t\t\t\t\t} else if (arr.isSystem === 1 && arr.type === 2) {\r\n\t\t\t\t\t\tself.closeSocket()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tbig(url) {\r\n\t\t\t\tconsole.log(url)\r\n\t\t\t\tlet arr = new Array()\r\n\t\t\t\tarr.push(url)\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: arr\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//已读回执消息\r\n\t\t\treadMessage(id) {\r\n\t\t\t\tconst newMsg = {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tcontent: \"已读消息\",\r\n\t\t\t\t\tsessionId: this.userInfo.sessionId,\r\n\t\t\t\t\ttype: 5,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconsole.log(\"消息\", newMsg)\r\n\r\n\t\t\t\t// 发送消息\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(newMsg), // 要发送的消息内容\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log('已读消息发送成功', res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.error('已读消息发送失败', err);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetSession(id) {\r\n\t\t\t\tconsole.log(\"sessionID111\", id)\r\n\r\n\t\t\t\tthis.userInfo.sessionId = id\r\n\t\t\t},\r\n\t\t\tsetTitle(name) {\r\n\t\t\t\tif (name) {\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle: name,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tchooseImg() {\r\n\t\t\t\tlet self = this\r\n\t\t\t\tthis.msgType = 2\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 6, //默认9\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album', 'camera'], //从相册选择\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log(JSON.stringify(res.tempFilePaths));\r\n\t\t\t\t\t\tself.sendImage(res.tempFilePaths)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendImage(arr) {\r\n\t\t\t\tconsole.log(arr)\r\n\t\t\t\tlet self = this\r\n\t\t\t\tarr.forEach(img => {\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl: this.reqUrl + \"/file/upload\",\r\n\t\t\t\t\t\tfilePath: img,\r\n\t\t\t\t\t\tname: 'file', // 服务端接收的字段名\r\n\t\t\t\t\t\tformData: this.formData,\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Authorization': this.token\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (uploadRes) => {\r\n\t\t\t\t\t\t\tconsole.log(\"uploadRes\", uploadRes.statusCode)\r\n\t\t\t\t\t\t\tif (uploadRes.statusCode === 200) {\r\n\t\t\t\t\t\t\t\tthis.newMessage = JSON.parse(uploadRes.data).data;\r\n\t\t\t\t\t\t\t\tconsole.log(JSON.parse(uploadRes.data).data)\r\n\t\t\t\t\t\t\t\tself.sendMessage()\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '上传失败！',\r\n\t\t\t\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t\tconsole.error('上传失败', error);\r\n\t\t\t\t\t\t\t// 处理上传失败的逻辑\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcacheMsg(arr) {\r\n\t\t\t\tarr.voice = true\r\n\t\t\t\t// \tif (arr.msgType === 3) {\r\n\t\t\t\t// \t\tconst indexOfEqualSign = arr.content.indexOf('=');\r\n\t\t\t\t// \t\tconst numberAfterEqualSign = arr.content.substr(indexOfEqualSign + 1);\r\n\t\t\t\t// \t\tconst durationTime = parseInt(numberAfterEqualSign, 10) / 1000;\r\n\r\n\t\t\t\t// \t\tarr.time = durationTime.toFixed(0)\r\n\t\t\t\t// \t}\r\n\r\n\r\n\t\t\t\tthis.messages.push(arr);\r\n\t\t\t\tuni.setStorageSync('chatMessages_' + this.userInfo.id, this.messages);\r\n\t\t\t\tthis.scrollToBottom()\r\n\t\t\t},\r\n\r\n\t\t\tconnectSocket() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tconst self = this;\r\n\t\t\t\t\t// 在页面中打开 WebSocket 连接\r\n\t\t\t\t\tuni.connectSocket({\r\n\t\t\t\t\t\turl: this.webSocket, // WebSocket服务器地址\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\"Authorization\": this.token\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tconsole.log('WebSocket连接成功', res);\r\n\t\t\t\t\t\t\tself.heartMsg();\r\n\t\t\t\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t\t\t\t// self.registerMessage();\r\n\t\t\t\t\t\t\t// }, 400); // 这里延迟执行2秒，可以根据需要调整延迟时间\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tconsole.log('Method A execution completed.');\r\n\t\t\t\t\t\t\t\tresolve(); // 当方法A执行完成时调用resolve\r\n\t\t\t\t\t\t\t}, 1000); // 这里模拟一个异步操作，例如耗时2秒\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.error('WebSocket连接失败', err);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tsendOneMessage() {\r\n\t\t\t\tthis.connectSocket().then(() => {\r\n\t\t\t\t\tthis.registerMessage()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tstopHeartBeat() {\r\n\t\t\t\tclearInterval(this.heartBeatInterval); // 清除心跳定时器\r\n\t\t\t},\r\n\r\n\t\t\theartMsg() {\r\n\t\t\t\tlet self = this\r\n\t\t\t\tthis.heartBeatInterval = setInterval(() => {\r\n\t\t\t\t\tconst newMsg = {\r\n\t\t\t\t\t\tsendId: this.id,\r\n\t\t\t\t\t\tcontent: \"心跳消息\",\r\n\t\t\t\t\t\tsessionId: this.userInfo.sessionId,\r\n\t\t\t\t\t\ttype: 0,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// 发送消息\r\n\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\tdata: JSON.stringify(newMsg), // 要发送的消息内容\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tconsole.log('心跳消息发送成功', res);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.error('心跳消息发送失败', err);\r\n\t\t\t\t\t\t\tself.stopHeartBeat()\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 10000); // 每隔5秒发送一次心跳消息\r\n\t\t\t},\r\n\t\t\tregisterMessage() {\n\t\t\t\t\r\n\t\t\t\tconst newMsg = {\r\n\t\t\t\t\tsendId: this.id,\r\n\t\t\t\t\treceiveId: this.userInfo.id,\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tsessionType: this.sessionType,\r\n\t\t\t\t\tjobId: this.jobId\r\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log(\"注册消息发送内容\",newMsg)\r\n\r\n\t\t\t\t// 发送消息\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(newMsg), // 要发送的消息内容\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log('注册消息发送成功', res);\r\n\t\t\t\t\t\t// this.userInfo.sessionId = res.data.data\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\r\n\t\t\t\t\t\tconsole.error('注册消息发送失败', err);\r\n\t\t\t\t\t\tconsole.error('注册消息data', newMsg);\r\n\t\t\t\t\t\tthis.registerMessage()\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\tcloseSocket() {\r\n\t\t\t\tuni.closeSocket({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log('WebSocket连接已关闭', res);\r\n\t\t\t\t\t\t// self.stopHeartBeat()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.error('WebSocket关闭失败', err);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetUserInfo() {\r\n\r\n\t\t\t\tconst token = uni.getStorageSync(\"token\")\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.reqUrl + \"/userInfo\",\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'Authorization': token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data.code === 200) {\r\n\t\t\t\t\t\t\tthis.currentUser = res.data.data\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tscrollToBottom() {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\tscrollTop: 9999,\r\n\t\t\t\t\t\tduration: 0\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 100); // 设置一个适当的延迟时间，例如100毫秒\r\n\t\t\t},\r\n\t\t\tstartRecord(event) {\r\n\t\t\t\t// 记录开始触摸的位置\r\n\t\t\t\tthis.startY = event.touches[0].clientY;\r\n\t\t\t\tthis.pop = true\r\n\r\n\t\t\t\t// 开始录音\r\n\t\t\t\tthis.recording = true;\r\n\t\t\t\tthis.startTime = Date.now()\r\n\t\t\t\tthis.startTime = new Date().getTime();\r\n\t\t\t\tconsole.log(\"开始录音~\")\r\n\t\t\t\t//消息类型\r\n\t\t\t\tthis.msgType = 3\r\n\r\n\t\t\t\t// 开始录音\r\n\t\t\t\tthis.recorderManager.start({\r\n\t\t\t\t\tformat: 'mp3', // 录音的格式\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendVoice() {\r\n\t\t\t\tif (this.movingY < -50) {\r\n\t\t\t\t\tconsole.log(\"移动\", this.movingY)\r\n\t\t\t\t\tthis.cancelRecord()\r\n\t\t\t\t\tconsole.log(\"取消了1111~\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet arr = new Array()\r\n\t\t\t\t\tconsole.log(\"取消了111222~\")\r\n\t\t\t\t\tarr.push(this.tmpRecords)\r\n\t\t\t\t\tthis.sendImage(arr)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.movingY = 0\r\n\t\t\t},\r\n\t\t\tstopRecord() {\r\n\t\t\t\t// 结束录音\r\n\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tthis.recorderManager.stop();\r\n\t\t\t\tthis.pop = false\r\n\t\t\t\tthis.send_show = true\r\n\t\t\t\tthis.exit_show = false\r\n\t\t\t\tlet endTime = Date.now() - this.startTime\r\n\t\t\t\tthis.voiceTime = (endTime / 1000).toFixed(0)\r\n\t\t\t\tconsole.log(\"录音结束\")\r\n\r\n\t\t\t},\r\n\t\t\tcancelRecord() {\r\n\t\t\t\t// 取消录音\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tconsole.log(\"录音取消\")\r\n\t\t\t\t// this.showCancelPopup = true;\r\n\t\t\t\tthis.recorderManager.stop(); // 停止录音\r\n\t\t\t},\r\n\t\t\ttouchMove(event) {\r\n\t\t\t\tif (!this.recording) return;\r\n\r\n\t\t\t\t// 计算手指移动的距离\r\n\t\t\t\tthis.movingY = event.touches[0].clientY - this.startY;\r\n\r\n\t\t\t\tconsole.log(\"移动距离\", this.movingY)\r\n\r\n\t\t\t\t// 如果手指上滑超过一定距离，显示取消录音的弹框\r\n\t\t\t\tif (this.movingY < -50) {\r\n\t\t\t\t\t// this.showCancelPopup = true;\r\n\r\n\t\t\t\t\tthis.exit_show = true\r\n\t\t\t\t\tthis.send_show = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// this.showCancelPopup = false;\r\n\r\n\t\t\t\t\tthis.exit_show = false\r\n\t\t\t\t\tthis.send_show = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//播放语音\r\n\t\t\tvoicePlay(voiceUrl, index) {\r\n\t\t\t\tconsole.log(\"语音播放\", voiceUrl)\r\n\t\t\t\tconst innerAudioContext = uni.createInnerAudioContext();\r\n\t\t\t\tthis.voice = false\r\n\t\t\t\tthis.messages[index].voice_play = true\r\n\t\t\t\tthis.messages[index].voice = false\r\n\t\t\t\tinnerAudioContext.autoplay = true;\r\n\t\t\t\tinnerAudioContext.src = voiceUrl;\r\n\t\t\t\t//开始播放\r\n\t\t\t\tinnerAudioContext.onPlay(() => {\r\n\t\t\t\t\tconsole.log('开始播放');\r\n\t\t\t\t});\r\n\t\t\t\tinnerAudioContext.onCanplay(() => {\r\n\t\t\t\t\tconst duration = innerAudioContext.duration;\r\n\t\t\t\t\tconsole.log('音频时长：', duration);\r\n\t\t\t\t\tconsole.log('音频时长：', innerAudioContext);\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//播放结束\r\n\t\t\t\tinnerAudioContext.onEnded((res) => {\r\n\t\t\t\t\tthis.voice = true\r\n\t\t\t\t\tthis.messages[index].voice_play = false\r\n\t\t\t\t\tthis.messages[index].voice = true\r\n\t\t\t\t});\r\n\t\t\t\t//播放错误\r\n\t\t\t\tinnerAudioContext.onError((res) => {\r\n\t\t\t\t\tconsole.log(res.errMsg);\r\n\t\t\t\t\tconsole.log(res.errCode);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.box {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\twidth: 100%;\r\n\t\t/* height: 80px; */\r\n\t\tbackground: white;\r\n\t\tborder-bottom: 4px;\r\n\t\t/* margin-bottom: 20px; */\r\n\t}\r\n\r\n\t.container {\r\n\t\tpadding: 2% 0;\r\n\t\twidth: 98%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground-color: white;\r\n\t\tmargin-bottom: 1vh;\r\n\t}\r\n\r\n\t.inp_comm {\r\n\t\tpadding: 1% 1% 1% 4%;\r\n\t\twidth: 72%;\r\n\t\t/* flex: 80; */\r\n\t\tborder: 1px solid #ccc;\r\n\t\tborder-radius: 20px;\r\n\t\tmargin: 0px 2px 10px 4px;\r\n\t}\r\n\r\n\t.records {\r\n\t\twidth: 77.5%;\r\n\t\theight: 33px;\r\n\t\tline-height: 30px;\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #E7E5E4;\r\n\t\tcolor: black;\r\n\t\tborder-radius: 20px;\r\n\t\tmargin: 0px 2px 10px 4px;\r\n\t}\r\n\r\n\t.keyA-icon {\r\n\t\t/* padding: 1px; */\r\n\t\twidth: 30px;\r\n\t\theight: 32px;\r\n\t\tflex: 12;\r\n\t\tmargin-left: 2vw;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.keyB-icon {\r\n\t\t/* padding: 1px; */\r\n\t\twidth: 33px;\r\n\t\theight: 37px;\r\n\t\tflex: 13;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.plus-info {\r\n\t\tbackground: #fafafa;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\theight: 100px;\r\n\t\tpadding-bottom: 2vh;\r\n\t}\r\n\r\n\t.button-item {\r\n\t\tpadding: 5%;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.icon {\r\n\t\twidth: 30px;\r\n\t\theight: 30px;\r\n\t}\r\n\r\n\t.text {\r\n\t\tfont-size: small;\r\n\t\tcolor: gray;\r\n\t}\r\n\r\n\t.chatImg-L {\r\n\t\tmax-width: 100px;\r\n\t\tmax-height: 100px;\r\n\t\tborder-radius: 10px;\r\n\t\tobject-fit: fill;\r\n\t\tmargin-left: 2%;\r\n\t}\r\n\r\n\r\n\r\n\r\n\t.chatImg-R {\r\n\t\theight: 150px;\r\n\t\twidth: 90px;\r\n\t\tborder-radius: 10px;\r\n\t\t/* object-fit: fill; */\r\n\t\tmargin-right: 2%;\r\n\t}\r\n\r\n\r\n\r\n\r\n\t/* 样式可以根据需求进行修改 */\r\n\t.container1 {\r\n\t\t/* display: flex;\r\n\t\tflex-direction: column; */\r\n\t\t/* height: 100vh; */\r\n\t\tpadding: 1vw 0 25vw 0;\r\n\t}\r\n\r\n\t/* .chat-container {\r\n\t\tflex: 1;\r\n\t\toverflow-y: scroll;\r\n\t\tpadding: 10px;\r\n\t} */\r\n\r\n\t.message-a {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 4%;\r\n\t}\r\n\r\n\t.message-b {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-end;\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 4%;\r\n\t}\r\n\r\n\t.a-img {\r\n\t\twidth: 40px;\r\n\t\theight: 40px;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.b-img {\r\n\t\twidth: 40px;\r\n\t\theight: 40px;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.a-text {\r\n\t\tbackground-color: #E5E5EA;\r\n\t\tpadding: 8px;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-bottom: 8px;\r\n\t\tmargin-left: 2%;\r\n\t\twidth: auto;\r\n\t}\r\n\r\n\t.b-text {\r\n\t\tbackground-color: #DCF8C6;\r\n\r\n\t\tpadding: 8px;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-right: 2%;\r\n\t\twidth: auto;\r\n\t}\r\n\r\n\t.input-container {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.pop {\r\n\t\tposition: fixed;\r\n\t\ttop: 50%;\r\n\t\tleft: 30%;\r\n\t\twidth: 40%;\r\n\t\theight: 21%;\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #292524;\r\n\t\tcolor: #f4ea2a;\r\n\t\tborder-radius: 20px;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.start-text {\r\n\t\tcolor: white;\r\n\t}\r\n\r\n\t.quxiao {\r\n\t\twidth: 60px;\r\n\t\theight: 60px;\r\n\t\tmargin-top: 25%;\r\n\t\tmargin-bottom: 5%;\r\n\t}\r\n\r\n\t.voice {\r\n\t\twidth: 20px;\r\n\t\theight: 20px;\r\n\t}\r\n\r\n\t.voice1 {\r\n\t\twidth: 20px;\r\n\t\theight: 20px;\r\n\t\ttransform: rotate(180deg);\r\n\t}\r\n\r\n\t.voice-time {\r\n\t\tmargin: 0 15px 0 15px;\r\n\t}\r\n\r\n\t.voice-view1 {\r\n\t\tbackground-color: #E5E5EA;\r\n\t\tpadding: 6px;\r\n\t\tborder-radius: 8px;\r\n\t\tfont-size: 12px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-right: 2%;\r\n\t\tmargin-left: 2%;\r\n\t}\r\n\r\n\t.voice-view {\r\n\t\tbackground-color: #DCF8C6;\r\n\t\tpadding: 6px;\r\n\t\tborder-radius: 8px;\r\n\t\tfont-size: 12px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-right: 2%;\r\n\t\tmargin-left: 2%;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1721003812749\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}